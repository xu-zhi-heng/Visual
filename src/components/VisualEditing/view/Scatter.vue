<template>
    <div class="scatter" ref="scatter">

    </div>
</template>

<script>
    import {mapGetters} from "vuex";

    export default {
        name: "Scatter",
        props: ['data'],
        mounted() {
            if(JSON.stringify(this.data.options) != '{}') {
                this.init(1)
            }else {
                this.init(0)
            }
        },
        methods: {
            init(type) {
                let scatterDom = this.$refs.scatter
                let scatter = this.$echarts.init(scatterDom,this.theme)
                let options

                if(type == 0) {
                    options = {
                        backgroundColor: '#030724',
                        title: {
                            text: '航班起飞时间',
                            left: 'center',
                            top: '20px'
                        },
                        xAxis: {},
                        yAxis: {},
                        series: [{
                            symbolSize: 10,
                            data:[[17, 35], [12, 40], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [21, 10], [7, 50], [20, 15], [7, 50], [7, 25], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [21, 10], [7, 50], [20, 15], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [8, 5], [7, 50], [0, 25], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [0, 25], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5]],
                            type: 'scatter'
                        }]
                    }
                    scatter.setOption(options)
                    this.$set(this.view[this.viewLength - 1],'options',options)
                    this.$set(this.view[this.viewLength - 1],'echartInstance',scatter)
                }else if(type == 1) {
                    options = this.data.options
                    scatter.setOption(options)
                    this.$set(this.view[this.setOptionsLength],'options',options)
                    this.$set(this.view[this.setOptionsLength],'echartInstance',scatter)
                    this.$store.commit('AsetOptionsLength',this.setOptionsLength + 1)
                }

            }
        },
        computed: {
            ...mapGetters([
                'currentEchartInstance',
                'view',
                'viewLength',
                'theme',
                'setOptionsLength'
            ])
        },
        watch: {
            theme: {
                handler(value) {
                    this.init()
                },
                deep: true
            }
        }
    }
</script>

<style scoped>
    .scatter {
        width: 800px;
        height: 600px;
    }
</style>