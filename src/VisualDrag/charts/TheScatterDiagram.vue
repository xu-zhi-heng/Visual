<template>
    <div class="datav-wrapper" :style="getWidthAndHeightAndOpacity()">
        <div class="scatterChart" ref="scatterChart">

        </div>
    </div>
</template>

<script>
    import {mapGetters} from 'vuex'
    export default {
        name: "TheScatterDiagram",
        props: ['data'],
        data() {
            return {
                scatterChartDom: '',
                scatterChartData: {
                    backgroundColor: '#030724',
                    title: {
                        text: '航班起飞时间',
                        left: 'center',
                        top: '20px'
                    },
                    xAxis: {},
                    yAxis: {},
                    series: [{
                        symbolSize: 10,
                        data:[[17, 35], [12, 40], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [21, 10], [7, 50], [20, 15], [7, 50], [7, 25], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [21, 10], [7, 50], [20, 15], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [9, 10], [20, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [9, 0], [18, 45], [8, 0], [7, 55], [17, 30], [8, 10], [8, 5], [7, 50], [0, 25], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [16, 5], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [17, 25], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [18, 55], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [0, 25], [7, 50], [20, 50], [16, 55], [10, 10], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [19, 30], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [8, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [7, 55], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [16, 10], [19, 5], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5], [9, 50], [17, 35], [8, 15], [19, 10], [10, 55], [10, 0], [21, 0], [9, 5], [6, 50], [11, 40], [10, 25], [9, 50], [22, 5], [19, 5], [18, 20], [8, 0], [11, 20], [14, 35], [8, 55], [8, 10], [18, 45], [8, 0], [13, 55], [10, 10], [8, 10], [8, 5], [7, 50], [12, 5], [7, 50], [20, 50], [16, 55], [7, 35], [14, 20], [8, 50], [18, 45], [14, 30], [14, 45], [8, 0], [8, 10], [9, 5]],
                        type: 'scatter'
                    }]
                }
            }
        },
        mounted() {
            if(JSON.stringify(this.data.options) === '{}') {
                this.init(0)
            }else {
                this.init(1)
            }
        },
        methods: {
            init(type) {
                this.scatterChartDom = this.$echarts.init(this.$refs.scatterChart,'chalk')
                if(type == 0) {
                    this.scatterChartDom.setOption(this.scatterChartData,true)
                    this.$set(this.data,'options',this.scatterChartData)
                    this.$set(this.data,'echartInstance',this.scatterChartDom)
                }else if (type == 1){
                    this.scatterChartDom.setOption(this.data.options,true)
                    this.$set(this.data,'echartInstance',this.scatterChartDom)
                }
            },
            getWidthAndHeightAndOpacity() {
                if(this.data.isOld === 1) {
                    return {
                        width: this.data.style.width,
                        height: this.data.style.height,
                        opacity: this.data.style.opacityValue === null ? 1 : this.data.style.opacityValue
                    }
                }
            },
        },
        computed: {
            ...mapGetters([
                'componentArray'
            ])
        },
    }
</script>

<style scoped>
    .datav-wrapper {
        pointer-events: none!important;
        width: 800px;height: 600px;transform: translateZ(0px);opacity: 1;
    }
    .scatterChart {
        width: 100%;
        height: 100%;
        display: block;
    }
</style>